name: 'Prepare Release'
on:
  push:
    branches:
      - ci/*
    tags:
      - v.*
      - latest*

jobs:

  'MacOS':
    runs-on: macos-latest
    steps:
    - uses: actions/checkout@v1
    - uses: actions/setup-node@v1
    - name: ' Building...'
      run: |
        npm ci
        npm run package:mac
    - name: 'Packing DMG...'
      if: success()
      run: npx electron-installer-dmg 'release-builds/Time to Leave-darwin-x64/Time to Leave.app' time-to-leave --out 'packages/' --icon=assets/icon-mac.icns --verbose

